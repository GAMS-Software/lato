<%= turbo_frame_tag "lato_index_#{model_name_underscore}" do %>

<%= form_tag '', method: :get, data: { turbo_frame: '_self' } do %>

<div class="table-responsive">
  <table class="table table-striped table-bordered">
    <thead>
      <tr class="align-middle">
        <% columns.each do |column| %>
          <th scope="col">
            <div class="d-flex align-items-center">
              <span><%= collection.model.human_attribute_name column %></span>
              <% if sortable_columns.include?(column) %>
              <div class="btn-group ms-3">
                <div class="position-relative btn btn-sm <%= params[:sort_by] == "#{column}|ASC" ? 'btn-primary' : 'btn-outline-primary' %>">
                  <input type="submit" name="sort_by" value="<%= column %>|ASC" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0">
                  <i class="bi bi-sort-up"></i>
                </div>

                <div class="position-relative btn btn-sm <%= params[:sort_by] == "#{column}|DESC" ? 'btn-primary' : 'btn-outline-primary' %>">
                  <input type="submit" name="sort_by" value="<%= column %>|DESC" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0">
                  <i class="bi bi-sort-down"></i>
                </div>
              </div>
              <% end %>
            </div>
          </th>
        <% end %>
      </tr>
    </thead>
    <tbody>
      <% collection.each do |member| %>
        <tr>
          <% columns.each do |column| %>
            <td>
              <% viewer_function_name = "#{model_name_underscore}_#{column}" %>
              <%= respond_to?(viewer_function_name) ? send(viewer_function_name, member) : member.send(column) %>
            </td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
    <tfoot>
      <tr>
        <td colspan="<%= columns.length %>">
          <div class="d-flex justify-content-between align-items-center">
            <%= paginate collection %>
            <span class="text-muted"><%= collection.count %> risultati totali
          </div>
        </td>
      </tr>
    </tfoot>
  </table>
</div>

<% end %>

<% end %>