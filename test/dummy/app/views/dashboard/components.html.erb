<%= lato_page_head 'Componenti' %>

<%

def component_code(file)
  File.read(Rails.root.join('app', 'views', 'dashboard', 'components', "_#{file}.html.erb"))
end

%>

<p>
Lato dispone di una serie di componenti funzionali riutilizzabili.<br>
Utilizzando le componenti di Lato è possibile risparmiare tempo di lavoro e facilitare le attività di manutenzione dell'applicazione.<br>
Tutte le componenti sono disponibili tramite l'helper <code>Lato::ComponentsHelper</code>.
</p>

<p>
<%= link_to 'Source code: Lato::ComponentsHelper', 'https://github.com/Lato-GAM/lato/blob/main/app/helpers/lato/components_helper.rb', target: '_blank' %>
</p>

<h2>Navbar</h2>

<h3>Navbar nav item</h3>

<p>
Componente per renderizzare una voce di menu nella navbar.
Parametri:<br>
- <i>key</i>: chiave della voce di menu. Utilizzata per attivare la voce di menu se impostata attiva tramite la funzione <code>active_navbar</code> del concern <code>Lato::Layoutable</code>.<br>
- <i>path</i>: path o url assoluto dove rimandare l'utente.<br>
- <i>&block</i>: blocco di HTML da renderizzare all'interno della voce di menu.
</p>

<pre>
&#60;%= lato_navbar_nav_item :account, lato.account_path do %&#62;
  Account
&#60;% end %&#62;
</pre>

<h2>Sidebar</h2>

<h3>Sidebar nav item</h3>

<p>
Componente per renderizzare una voce di menu nella sidebar.
Parametri:<br>
- <i>key</i>: chiave della voce di menu. Utilizzata per attivare la voce di menu se impostata attiva tramite la funzione <code>active_sidebar</code> del concern <code>Lato::Layoutable</code>.<br>
- <i>path</i>: path o url assoluto dove rimandare l'utente.<br>
- <i>&block</i>: blocco di HTML da renderizzare all'interno della voce di menu.
</p>

<pre>
&#60;%= lato_sidebar_nav_item :account, lato.account_path do %&#62;
  Account
&#60;% end %&#62;
</pre>

<h2>Page</h2>

<h3>Page head</h3>

<pre>
&#60;%= lato_page_head 'Titolo pagina' %&#62;
</pre>

<div class="bg-light p-3 mb-3">
<%= lato_page_head 'Titolo pagina' %>
</div>

<pre>
&#60;%= lato_page_head 'Titolo pagina', [{ label: 'Titolo 1', path: main_app.page_path }, { label: 'Titolo 2' }] %&#62;
</pre>

<div class="bg-light p-3 mb-3">
<%= lato_page_head 'Titolo pagina', [{ label: 'Titolo 1', path: '#' }, { label: 'Titolo 2' }] %>
</div>

<pre>
&#60;%= lato_page_head 'Titolo pagina' do %&#62;
  &#60p class="lead"&#62;Benvenuto in questa pagina&#60/p&#62;
&#60;% end %&#62;
</pre>

<div class="bg-light p-3 mb-3">
<%= lato_page_head 'Titolo pagina' do %>
  <p class="lead">Benvenuto in questa pagina</p>
<% end %>
</div>

<h2>Form</h2>

<p>
I form possono essere generati utilizzando le componenti <code>lato_form</code>.<br>
Le componenti <code>lato_form</code> sono una serie di componenti diverse programmate per essere utilizzate con l'helper Rails <code>form_with</code> e il controller Stimulus <code>lato_form_controller</code>.<br>
Di seguito la lista di componenti disponibili e un esempio di utilizzo:
<ul>
  <li><code>lato_form_notices</code> visualizza il feedback positivo al salvataggio (notice impostati dalla action).</li>
  <li><code>lato_form_errors</code> visualizza il feedback negativo al salvataggio (errori presenti nell'istanza del modello).</li>
  <li><code>lato_form_item_label</code> visualizza la label dei campi.</li>
  <li><code>lato_form_item_input_text</code> visualizza un input di testo.</li>
  <li><code>lato_form_item_input_email</code> visualizza un input email.</li>
  <li><code>lato_form_item_input_password</code> visualizza un input password.</li>
  <li><code>lato_form_item_input_check</code> visualizza un input checkbox.</li>
  <li><code>lato_form_submit</code> visualizza il pulsante di submit.</li>
</ul>
</p>

<pre>
<%= component_code('form-example') %>
</pre>

<div class="bg-light p-3 mb-3">
<%= render 'dashboard/components/form-example' %>
</div>

<h2>Index</h2>

<p>
La componente <code>lato_index</code> permette di visualizzare facilmente i dati presenti in database.
</p>

<h3>Index (front-end)</h3>

<p>
Il modo più semplice per utilizzare la componente è quello di passargli una collezione di <code>ActiveRecord</code> come parametro:
</p>

<pre>
&#60;%= lato_index Product.all.limit(5) %&#62;
</pre>

<div class="bg-light p-3 mb-3">
<%= lato_index Product.all.limit(5) %>
</div>

<h4>Personalizzare le colonne</h4>

<p>
Le colonne possono essere personalizzate attraverso il parametro <code>:columns</code>:
</p>

<pre>
&#60;%= lato_index Product.all.limit(5), columns: %i[id code status] %&#62;
</pre>

<div class="bg-light p-3 mb-3">
<%= lato_index Product.all.limit(5), columns: %i[id code status] %>
</div>

<div class="alert alert-info mt-3">
  <h4 class="alert-heading">Note</h4>
  <p>
  I titoli delle colonne possono essere modificati attraverso i file di traduzione di Rails.<br>
  Esempio:
  </p>
<pre>
it:
  activerecord:
    attributes:
      product:
        code: Codice
        status: Stato
</pre>
</div>

<h3>Index (back-end)</h3>

...

<h4>Rendere le colonne ordinabili</h4>

<p>
Le colonne possono essere rese ordinabili attraverso il parametro <code>:sortable_columns</code>:
</p>

<pre>
&#60;%= lato_index Product.all.limit(5), columns: %i[id code status], sortable_columns: %i[id code status] %&#62;
</pre>

<div class="bg-light p-3 mb-3">
<%= lato_index Product.all.limit(5), columns: %i[id code status], sortable_columns: %i[id code status] %>
</div>